/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
/*

Last updated: 30.04.2025
*/

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

var a = require('users/bzgeo/hyperspectral_toolkit:00_pkg/emit_hyperion_pace.js');

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

//var pt1 = ee.Geometry.Point([-88.2009, 17.4992]); // BZ City
var pt1 = ee.Geometry.Point([-88.0691, 17.494]); // Drowned Cayes
//var pt1 = ee.Geomestry.Point([-88.9301, 16.9904]); // MPR

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

// filter to AOI
var emit = a.coll_emit_sub.filterBounds(pt1)
                          .map(function(i){return i.set('any', i.select(0).mask().reduceRegion(ee.Reducer.anyNonZero(), pt1).values().get(0))})
                          .filter(ee.Filter.eq('any', 1)).getRegion(pt1, 60).slice(1)
                          .map(function(l) {return ee.List(l).slice(4)});

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////


print(ui.Chart.array.values(emit, 1, a.wl_emit_sub)
      .setOptions({title: 'EMIT surface reflectance', pointsVisible: false, lineWidth: 1,
      hAxis: {viewWindow: {min:380, max:2500}, vAxis: {viewWindow: {min:0, max:0.50}}}
      }));

/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////